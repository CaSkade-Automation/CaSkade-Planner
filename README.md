
<img align="left" height="100px" src="https://avatars.githubusercontent.com/u/149593817?s=200&v=4">
<h1>CaSkade Planner - Capability-based Process Planning using SMT</h1>

CaSkade-Planner is an automated planning approach to derive process sequences that consist of provided capabilities for one or more required capabilities. It makes use of the [CaSk ontology](https://github.com/CaSkade-Automation/CaSk).

## Installation
Make sure that you have [Poetry](https://python-poetry.org/) installed. Clone this repository and install everything using `poetry install`. Afterwards you can use CaSkade-Planner according to the instructions below.

## How to use
### CLI
CaSkade-Planner can be used in a Terminal by running with the plan command: `poetry run caskade-planner-cli plan`. You can open the help with the `--help` option. <br>
In order to start a planning run, you have to pass a file path pointing to your ontology file that you want to carry planning out for. In addition, you can optionaly set an upper bound for the number of steps (aka *happenings*) your plan can have. And you can specify file paths for a problem, model and plan file that will be generated by the planner. Here is an overview of all the options:

```
Arguments:
  ONTOLOGY_FILE  Path to your ontology that is used for generating the
                 planning problem  [required]

Options:
  -mh, --max-happenings INTEGER  Maximum number of happenings to consider
                                 [default: 20]
  -problem, --problem-file TEXT  Path to where the generated problem will be
                                 stored
  -model, --model-file TEXT      Path to where the model file will be stored
                                 after solving
  -plan, --plan-file TEXT        Path to where the plan file will be stored
                                 after solving and transformation
  --help                         Show this message and exit.
```

### REST-API
If you want to use CaSkade-Planner as a standalone planning service to be used by other software components, you integrate it as a REST API.
After cloning and installing the project, start the REST API by calling `poetry run caskade-planner-api`. The planning API runs on port 5000.

In order to use it, send an HTTP POST request to:
<API-Address>:5000/plan?mode=<mode>&endpoint-url=<endpoint-url>

where API-Address is the (IP-) address of the machine your running the planner on. Mode can be either "file" or "sparql-endpoint. If you use "file", you have to sent your ontology as form-data (with key "ontology-file"). If you use "sparql-endpoint", you have to pass the endpoint url at <endpoint-url> in URL-encoded form.

### PyPI package
ðŸš§ Coming soon ðŸš§
